@model IEnumerable<Projekt.Models.Employee>
@{
    ViewData["Title"] = "Employees Hired in Period";
    var startDate = ViewBag.StartDate as DateTime?;
    var endDate = ViewBag.EndDate as DateTime?;
}

<div class="neo-card" style="margin-bottom: 2rem;">
    <h1 style="font-size: 2.5rem; font-weight: 900; text-transform: uppercase; margin-bottom: 2rem;">
        <i class="bi bi-calendar-range"></i> Employees Hired in Period
    </h1>

    <form method="get" class="neo-card" style="background: #f8fafc; margin-bottom: 2rem; border: 1px solid rgba(0,0,0,0.05);">
        <div style="display: grid; grid-template-columns: 1fr 1fr auto; gap: 1rem; align-items: end;">
            <div class="neo-form-group" style="margin: 0;">
                <label class="neo-form-label">Start Date</label>
                <input type="date" name="startDate" class="neo-input" value="@startDate?.ToString("yyyy-MM-dd")" />
            </div>
            <div class="neo-form-group" style="margin: 0;">
                <label class="neo-form-label">End Date</label>
                <input type="date" name="endDate" class="neo-input" value="@endDate?.ToString("yyyy-MM-dd")" />
            </div>
            <button type="submit" class="neo-btn neo-btn-success">
                <i class="bi bi-search"></i> Filter
            </button>
        </div>
    </form>

    @if (startDate.HasValue || endDate.HasValue)
    {
        <div class="neo-card neo-card-success" style="margin-bottom: 2rem; padding: 1.5rem;">
            <p style="font-weight: 800; margin: 0;">
                <i class="bi bi-info-circle-fill"></i> 
                Showing employees hired 
                @if (startDate.HasValue && endDate.HasValue)
                {
                    <span>from @startDate.Value.ToString("yyyy-MM-dd") to @endDate.Value.ToString("yyyy-MM-dd")</span>
                }
                else if (startDate.HasValue)
                {
                    <span>after @startDate.Value.ToString("yyyy-MM-dd")</span>
                }
                else
                {
                    <span>before @endDate.Value.ToString("yyyy-MM-dd")</span>
                }
                - Total: @Model.Count()
            </p>
        </div>
    }

    <div style="overflow-x: auto;">
        <table class="neo-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Department</th>
                    <th>Position</th>
                    <th>Email</th>
                    <th>Hire Date</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var employee in Model)
                {
                    <tr>
                        <td data-label="Name" style="font-weight: 700;">@employee.FirstName @employee.LastName</td>
                        <td data-label="Department">@(employee.Department?.Name ?? "Pending Assignment")</td>
                        <td data-label="Position">@employee.Position</td>
                        <td data-label="Email">@employee.Email</td>
                        <td data-label="Hire Date">@employee.HireDate.ToString("yyyy-MM-dd")</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <div style="margin-top: 2rem;">
        <a asp-action="Index" class="neo-btn" style="background: var(--neo-white);">
            <i class="bi bi-arrow-left"></i> Back to Reports
        </a>
    </div>
</div>
